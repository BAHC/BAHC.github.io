<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link id="favicon" rel="icon" type="image/x-icon" href="favicon_io/favicon.ico">
    <title>Presentation with controlled video at background</title>

    <!--Template based on URL below-->
    <link rel="canonical" href="https://getbootstrap.com/docs/4.3/examples/starter-template/">

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- Place your stylesheet here-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.5.0/css/swiper.min.css" integrity="sha256-XwfUNXGiAjWyUGBhyXKdkRedMrizx1Ejqo/NReYNdUE=" crossorigin="anonymous" />
</head>

<body>
    <main role="main" class="container">

        <div class="row justify-content-center align-items-center">
            <div id="jp_container_1" class="jp-video" role="application" aria-label="media player">
                <div class="jp-type-single">
                    <div id="jquery_jplayer_1" class="jp-jplayer"></div>
                </div>
            </div>
        </div>

        <!-- Slider main container -->
        <div class="swiper-container">
            <!-- Additional required wrapper -->
            <div class="swiper-wrapper">
                <div class="swiper-slide" id="slide-0">
                    <div class="slideBox">
                        <span class="slideText"></span>
                    </div>
                </div>
                <!-- Slides -->
                <div class="swiper-slide" id="slide-1">
                    <div class="slideBox">
                        <span class="slideText"></span>
                    </div>
                </div>
                <div class="swiper-slide" id="slide-2">
                    <div class="slideBox">
                        <span class="slideText"></span>
                    </div>
                </div>
                <div class="swiper-slide" id="slide-3">
                    <div class="slideBox">
                        <span class="slideText"></span>
                    </div>
                </div>
                <div class="swiper-slide" id="slide-4">
                    <div class="slideBox">
                        <span class="slideText"></span>
                    </div>
                </div>
                <div class="swiper-slide" id="slide-5">
                    <div class="slideBox">
                        <span class="slideText"></span>
                    </div>
                </div>
                <div class="swiper-slide" id="slide-6">
                    <div class="slideBox">
                        <span class="slideText"></span>
                    </div>
                </div>
                <div class="swiper-slide" id="slide-7">
                    <div class="slideBox">
                        <span class="slideText"></span>
                    </div>
                </div>
                <div class="swiper-slide" id="slide-8">
                    <div class="slideBox">
                        <span class="slideText"></span>
                    </div>
                </div>
                <div class="swiper-slide" id="slide-9">
                    <div class="slideBox">
                        <span class="slideText"></span>
                    </div>
                </div>
                <div class="swiper-slide" id="slide-10">
                    <div class="slideBox">
                        <span class="slideText"></span>
                    </div>
                </div>
                <div class="swiper-slide" id="slide-11">
                    <div class="slideBox">
                        <span class="slideText"></span>
                    </div>
                </div>
                <div class="swiper-slide" id="slide-12">
                    <div class="slideBox">
                        <span class="slideText"></span>
                    </div>
                </div>
            </div>
            <!-- If we need pagination -->
            <div class="swiper-pagination"></div>

            <!-- If we need navigation buttons -->
            <div class="swiper-button-prev"></div>
            <div class="swiper-button-next"></div>

            <!-- If we need scrollbar -->
            <div class="swiper-scrollbar"></div>
        </div>

    </main><!-- /.container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.5.0/js/swiper.min.js" integrity="sha256-uckMYBvIGtce2L5Vf/mwld5arpR5JuhAEeJyjPZSUKY=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jplayer/2.9.2/jplayer/jquery.jplayer.min.js" integrity="sha256-YAIw54P6OPiIkUJq8S3ayOEunEz/MiK2AxDY0oFLNBs=" crossorigin="anonymous"></script>


<script type="text/javascript">

var player = {
    timer: 0,
    slides: 12,
    timers: {
        1: "0",
        2: "3",
        3: "6",
        4: "9",
        5: "11",
        6: "15",
        7: "19",
        8: "20",
        9: "23",
        10: "26",
        11: "29",
        12: "31"
    },

    messages: {
        1: "Арендовали яхту?",
        2: "Выберите специальный набор продуктов",
        3: "Для отдыха на яхте",
        4: "Всего 5 шагов",
        5: "1 Выберите один из сетов",
        6: "2 Укажите количество дней",
        7: "3 Укажите количество людей",
        8: "Рассчитать",
        9: "4 Измените блюда или...",
        10: "4 Измените продукты",
        11: "Редактируйте то, что Вам удобно",
        12: "5 Получите продукты на яхту",
    }
};

var myswiper = new Swiper('.swiper-container', {
    slidesPerView: 1,
    centeredSlides: true,
    loop: true,
    spaceBetween: 10,

    pagination: {
        el: '.swiper-pagination',
        clickable: true,
    },

    navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
    },

    // And if we need scrollbar
    scrollbar: {
        el: '.swiper-scrollbar',
    },
});



$(document).ready(function(){

    $("#jquery_jplayer_1").jPlayer({
        ready: function () {
            $(this).jPlayer("setMedia", {
                title: "Yachtering.eu 2019",
                m4v: "yachtering_presentation_201905.m4v",
                poster: "yachtering_presentation_201905.png"
            });
        },
        cssSelectorAncestor: "#jp_container_1",
        supplied: "m4v",
        size: {
             width: "auto",
             height: "100vh"
        }
    });

    player.start = function() {
        var startTime = parseInt(player.timers[player.timer]);
        $("#jquery_jplayer_1").jPlayer("play", startTime); // Begins playing N seconds into the media.
    }

    player.startMessage = function() {
        var numSlide = player.timer;
        var boxSlide  = $('#slide-'+ numSlide +' .slideBox');
        var textSlide = $('#slide-'+ numSlide +' .slideText');
        textSlide.html(player.messages[player.timer]);
        boxSlide.animate( { left: "100px", opacity: "1" }, "slow" );
            textSlide.animate( { fontSize: "4em" }, "slow" );
    }

    player.endMessage = function(prevSlide) {
        var numSlide = player.timer + prevSlide;
        var boxSlide  = $('#slide-'+ numSlide +' .slideBox');
        var textSlide = $('#slide-'+ numSlide +' .slideText');
        textSlide.html(player.messages[player.timer]);
        boxSlide.animate( { left: "-100px", opacity: "0.1" } );
            textSlide.animate( { fontSize: "1em" } );
    }

    $("#jquery_jplayer_1").jPlayer("play", 0);

    $(".swiper-button-next").click( function() {

        console.log(player.timers.length);

        if(player.timer == player.sliders) {
            player.timer = -1;
        }
        player.timer += 1;
        player.start();
        player.startMessage();
        player.endMessage(-1);
    });

    $(".swiper-button-prev").click( function() {
        if(player.timer == 0) {
            player.timer = player.sliders;
        }
        player.timer -= 1;
        player.start();
        player.startMessage();
        player.endMessage(1);
    });
  });
</script>

<link href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300&display=swap" rel="stylesheet">
<link rel="stylesheet" href="./style.css" />
</body>
</html>
